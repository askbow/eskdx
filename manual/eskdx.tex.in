% Copyright 2006 Konstantin Korikov <lostclus@ua.fm>
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2003/12/01 or later.
%
% This work has the LPPL maintenance status "maintained".
%
% This Current Maintainer of this work is Konstantin Korikov.
%
% This work consists of all files listed in manifest.txt.
%
m4_ESKDX_INIT
m4_FILE_INIT
\documentclass[russian,koi8-r,simple]{eskdtext}
\usepackage[T2A]{fontenc}
\usepackage{pscyr}
\usepackage{amstext}
\usepackage{amsmath}
\usepackage{calc}
\usepackage{array}
\usepackage{longtable}
\usepackage{listings}
\lstset{columns=fixed,language=[LaTeX]TeX,%
basicstyle=\small,breaklines=true,xleftmargin=10mm}
\renewcommand{\lstlistingname}{Листинг}
\captionsetup[lstlisting]{labelsep=dash}

\ESKDtitle{Коллекция eskdx v[[]]m4_ESKDX_VERSION}
\ESKDdocName{Руководство пользователя}
\ESKDauthor{Кориков~К.~В.}
\ESKDdate{m4_FILE_DATE([[$Date$]])}
\renewcommand{\ESKDtheTitleFieldVIIIr}{%
\copyright 2006 Константин Кориков}

\usepackage[unicode]{hyperref}
\hypersetup{pdfkeywords=ЕСКД ГОСТ LaTeX класс пакет}

\newcommand{\gost}[1]{\mbox{ГОСТ}\ \mbox{#1}}
\newcommand{\pkg}[1]{\mbox{\textsf{#1}}}
\newcommand{\cmd}[1]{\mbox{$\backslash$\texttt{#1}}}
\newcommand{\opt}[1]{\mbox{\texttt{#1}}}
\newcommand{\optarg}[1]{\mbox{\textit{#1}}}
\newcommand{\val}[1]{\mbox{\texttt{#1}}}
\newenvironment{defs}{\begin{itemize}}{\end{itemize}}
\newcommand{\cmddef}[2]{\item[]\mbox{\textbackslash\texttt{#1#2}}}
\newcommand{\cmdarg}[1]{\mbox{\textrm{\textit{#1}}}}

\begin{document}
\maketitle
\tableofcontents
\newpage
\section{Общие сведения}
\subsection{О коллекции \pkg{eskdx}}
Коллекция пакетов и классов \pkg{eskdx} рассчитана на использование в
среде \LaTeXe\ и предназначена для верстки документов в соответствии с
требованиями Единой системы конструкторской документации.  Коллекция
содержит два класса: \pkg{eskdtext} (для текстовой документации) и
\pkg{eskdgraph} (для чертежей и схем), а также некоторое число пакетов
(некоторые из них являются внутренними).

\subsection{Возможности коллекции}
Основные возможности \pkg{eskdx}:
\begin{itemize}
\item основная надпись и дополнительные графы по \gost{2.104-68},
форма 1, 2, 2а, 2б;
\item поддерживаемые форматы листов: А0, А1, А2, А3, А4;
\item поддержка двусторонней печати;
\item настройка элементов текста (абзацы, перечисления, и т.п.) и
рубрикации (разделы, подразделы, пункты, подпункты, приложения) по
\gost{2.105-95};
\item титульный лист и лист утверждения по \gost{2.105-95};
\item спецификация по \gost{2.106-96};
\item лист регистрации изменений по \gost{2.503-90};
\item поддержка множества языков (на данный момент русский и
украинский).
\end{itemize}

\section{Использование}
Для использования коллекции \pkg{eskdx} вам необходимо иметь как
минимум базовые знания системы \LaTeXe.

Основа коллекции "--- классы \pkg{eskdtext} и \pkg{eskdgraph}. Для
текстовых документов используется класс \pkg{eskdtext}, для чертежей и
схем "--- \pkg{eskdgraph}.

\subsection{Пример простого документа}
Пример простого текста документа приведен в
листинге~\ref{l:simpleexpmple}.
\begin{lstlisting}[float=bh,numbers=left,%
caption=Пример текстового документа,%
label=l:simpleexpmple]
\documentclass[russian,koi8-r]{eskdtext}
\ESKDdepartment{Акционерное Московское общество}
\ESKDcompany{завод имени И.~А.~Лихачева}
\ESKDclassCode{31 1398}
\ESKDtitle{Форсунка Ф-750}
\ESKDdocName{Технические условия}
\ESKDsignature{АБВГД ХХХХХХХХ}
\ESKDauthor{Петров~И.~И.}
\ESKDtitleApprovedBy{Руководитель ОКБА}{Гусев~И.~И.}
\ESKDtitleAgreedBy{Директор АМО ЗИЛ}{Иванов~И.~И.}
\ESKDtitleDesignedBy{Главный инженер АМО ЗИЛ}{Петров~И.~И}
\ESKDtitleDesignedBy{Руководитель разработки}{Лист~А.~А}

\begin{document}
\maketitle
\tableofcontents
\newpage
\section{Раздел 1}
Текст текст текст.
\end{document}
\end{lstlisting}

Опции \opt{russian} и \opt{koi8-r}, на строке 1, задают,
соответственно язык и кодировку документа. Команды на строках 2 по 12
задают информацию о документе, которая используется в титульном листе
и в основной надписи. Строки 15 по 19 "--- тело документа.

\subsection{Опции классов}
\subsubsection{Общие опции обоих классов}
Опции, воспринимаемые классами \pkg{eskdtext} и \pkg{eskdgraph}
приведены в таблице~\ref{t:common:opts}.
\begin{longtable}{|%
p{.30\textwidth-2\tabcolsep-1.5\arrayrulewidth}|
p{.70\textwidth-2\tabcolsep-1.5\arrayrulewidth}|}
\caption{Общие опции классов \pkg{eskdtext} и
\pkg{eskdgraph}\label{t:common:opts}}\\
\hline
\multicolumn{1}{|c|}{Опция}&\multicolumn{1}{c|}{Описание}\\\hline
\endfirsthead
\caption*{Продолжение таблицы}\\
\hline
\multicolumn{1}{|c|}{Опция}&\multicolumn{1}{c|}{Описание}\\\hline
\endhead
\opt{russian}\par\opt{ukrainian}&
Выбирает язык документа, соответственно русский, украинский. По
умолчанию русский.\\\hline
\opt{koi8-r}\par\opt{koi8-u}\par\opt{cp1251}\par\opt{iso8859-5}\par
\opt{cp866}&
Задает кодировку текста, соответственно \mbox{KOI8-R}, \mbox{KOI8-U},
\mbox{CP1251}, \mbox{ISO8859-5}, \mbox{CP866}.\\\hline
\opt{reduceheight=}&
Уменьшает высоту рамки за счет увеличения нижнего поля на
заданную высоту.\\\hline
\opt{emptystyle}&
Включает пустой стиль страниц, т.е. без рамки формы, без основной
надписи и без дополнительных граф.\\\hline
\opt{stitching}\par\opt{nostitching}&
Включает/выключает поле для переплета. По умолчанию поле включено.\\\hline
\opt{columnvii}\par\opt{nocolumnvii}&
Включает/выключает графу 7 основной надписи (номер листа/страницы). По
умолчанию графа 7 включена только для документов, содержащих больше
одного листа\\\hline
\opt{columnviii}\par\opt{nocolumnviii}&
Включает/выключает графу 8 основной надписи (общее количество
листов/страниц). По умолчанию графа 8 включена.\\\hline
\opt{columnsxix}\par\opt{nocolumnsxix}&
Включает/выключает дополнительные графы 19 по 23. По умолчанию
включены.\\\hline
\opt{columnsxxiv}\par\opt{nocolumnsxxiv}&
Включает/выключает дополнительные графы 24 и 25. По умолчанию
выключены.\\\hline
\opt{columnsxxvii}\par\opt{nocolumnsxxvii}&
Включает/выключает дополнительные графы 27 по 30. По умолчанию
выключены.\\\hline
\opt{columnxxxi}\par\opt{nocolumnxxxi}&
Включает/выключает дополнительную графу 31. По умолчанию
включена.\\\hline
\opt{columnxxxii}\par\opt{nocolumnxxxii}&
Включает/выключает дополнительную графу 32 (формат листа). По
умолчанию включена.\\\hline
\opt{simple}&
Тоже самое что \opt{nocolumnsxix}, \opt{nocolumnxxxi} и
\opt{nocolumnxxxii}.\\\hline
\opt{linethick=}&
Устанавливает толщину сплошной толстой линии. По умолчанию
\val{.4mm}.\\\hline
\opt{linethin=}&
Устанавливает толщину сплошной тонкой линии. По умолчанию
\val{.2mm}.\\\hline
\opt{vpadding=}&
Устанавливает расстояние от рамки формы до границ текста в начале и в
конце строк. По умолчанию \val{3mm}.\\\hline
\opt{hpadding=}&
Устанавливает расстояние от верхней или нижней строки текста до
верхней или нижней рамки. По умолчанию \val{10mm}.\\\hline
\end{longtable}

\subsubsection{Опции класса \pkg{eskdtext}}
Опции, воспринимаемые классом \pkg{eskdtext} приведены в
таблице~\ref{t:eskdtext:opts}.
\begin{longtable}{|%
p{.30\textwidth-2\tabcolsep-1.5\arrayrulewidth}|
p{.70\textwidth-2\tabcolsep-1.5\arrayrulewidth}|}
\caption{Опции класса \pkg{eskdtext}\label{t:eskdtext:opts}}\\
\hline
\multicolumn{1}{|c|}{Опция}&\multicolumn{1}{c|}{Описание}\\\hline
\endfirsthead
\caption*{Продолжение таблицы}\\
\hline
\multicolumn{1}{|c|}{Опция}&\multicolumn{1}{c|}{Описание}\\\hline
\endhead
\opt{12pt}\par\opt{14pt}&
Устанавливает размер шрифта документа, соответственно \val{12pt},
\val{14pt}. По умолчанию \val{14pt}.\\\hline
\opt{pointsingle}\par\opt{pointsection}\par\opt{pointsubsection}&
Устанавливает стиль нумерации пунктов, соответственно в пределах всего
документа, в пределах раздела, в пределах подраздела. По умолчанию
пункты нумеруются в пределах всего документа.\\\hline
\opt{twoside}&
Включает двустороннюю печать.\\\hline
\opt{draft}&
Включает черновой режим.\\\hline
\end{longtable}

\subsubsection{Опции класса \pkg{eskdgraph}}
Опции, воспринимаемые классом \pkg{eskdgraph} приведены в
таблице~\ref{t:eskdgraph:opts}.
\begin{longtable}{|%
p{.30\textwidth-2\tabcolsep-1.5\arrayrulewidth}|
p{.70\textwidth-2\tabcolsep-1.5\arrayrulewidth}|}
\caption{Опции класса \pkg{eskdgraph}\label{t:eskdgraph:opts}}\\
\hline
\multicolumn{1}{|c|}{Опция}&\multicolumn{1}{c|}{Описание}\\\hline
\endfirsthead
\caption*{Продолжение таблицы}\\
\hline
\multicolumn{1}{|c|}{Опция}&\multicolumn{1}{c|}{Описание}\\\hline
\endhead
\opt{a0paper}\par\opt{a1paper}\par\opt{a2paper}\par\opt{a3paper}\par
\opt{a4paper}&
Устанавливает формат (размер) листа, соответственно А0, А1, А2, А3,
А4. По умолчанию А4.\\\hline
\opt{landscape}\par\opt{portrait}&
Устанавливает ориентацию страницы, соответственно ландшафтная
ориентация (основная надпись вдоль длинной стороны листа), портретная
ориентация (основная надпись вдоль короткой стороны листа). По
умолчанию ландшафтная ориентация для листов формата больше А4, и
портретная ориентация для листов формата А4.\\\hline
\opt{ignorestamp}\par\opt{noignorestamp}&
Включает/выключает игнорирование основной надписи при
позиционировании рисунка чертежа. По умолчанию основная надпись
игнорируется.\\\hline
\opt{columnxxvi}\par\opt{nocolumnxxvi}&
Включает/выключает дополнительную графу 26. По умолчанию графа
включена.\\\hline
\opt{columnxxxiii}\par\opt{nocolumnxxxiii}&
Включает/выключает дополнительную графу 33. По умолчанию
выключена.\\\hline
\opt{columnxxxiv}\par\opt{nocolumnxxxiv}&
Включает/выключает дополнительную графу 34. По умолчанию
выключена.\\\hline
\opt{zonelabels}\par\opt{nozonelabels}&
Включает/выключает отметки зон. По умолчанию отметки выключены.\\\hline
\end{longtable}

\subsection{Информация о документе}
\label{docinfo}
Информацию о документе размещают в преамбуле документа используя
описанные ниже команды.

Наименование ведомства, в систему которого входит организация,
разработавшая документ, задает команда
\begin{defs}
\cmddef{ESKDdepartment}{\{\cmdarg{текст}\}}
\end{defs}

Наименование организации задает команда
\begin{defs}
\cmddef{ESKDcompany}{\{\cmdarg{текст}\}}
\end{defs}

Код по классификатору продукции задает команда
\begin{defs}
\cmddef{ESKDclassCode}{\{\cmdarg{текст}\}}
\end{defs}

Наименование изделия задают команды
\begin{defs}
\cmddef{ESKDunitName}{\{\cmdarg{текст}\}}
\cmddef{ESKDtitle}{\{\cmdarg{текст}\}}
\end{defs}
обе команды действуют одинаково (команды близнецы).

Наименование документа задает команда
\begin{defs}
\cmddef{ESKDdocName}{\{\cmdarg{текст}\}}
\end{defs}

Обозначение документа задает команда
\begin{defs}
\cmddef{ESKDsignature}{\{\cmdarg{текст}\}}
\end{defs}

Литеру, присвоенную данному документу, задает команда
\begin{defs}
\cmddef{ESKDletter}{\{\cmdarg{буква1}\}\{\cmdarg{буква2}\}%
\{\cmdarg{буква3}\}}
\end{defs}

Обозначение материала детали задает команда
\begin{defs}
\cmddef{ESKDmaterial}{\{\cmdarg{текст}\}}
\end{defs}

Массу изделия задает команда
\begin{defs}
\cmddef{ESKDmass}{\{\cmdarg{текст}\}}
\end{defs}

Масштаб чертежа задает команда
\begin{defs}
\cmddef{ESKDscale}{\{\cmdarg{текст}\}}
\end{defs}

Наименование или различительный индекс предприятия задает команда
\begin{defs}
\cmddef{ESKDgroup}{\{\cmdarg{текст}\}}
\end{defs}

Фамилию автора задает команда
\begin{defs}
\cmddef{ESKDauthor}{\{\cmdarg{текст}\}}
\end{defs}

Фамилию проверяющего задает команда
\begin{defs}
\cmddef{ESKDchecker}{\{\cmdarg{текст}\}}
\end{defs}

Фамилию нормоконтролера задает команда
\begin{defs}
\cmddef{ESKDnormContr}{\{\cmdarg{текст}\}}
\end{defs}

Фамилию утвердившего задает команда
\begin{defs}
\cmddef{ESKDapprovedBy}{\{\cmdarg{текст}\}}
\end{defs}

Дату документа задает команда
\begin{defs}
\cmddef{ESKDdate}{\{\cmdarg{год/месяц/число}\}}
\end{defs}

Описанные выше команды сохраняют значения своих аргументов в
соответствующие \cmd{ESKDthe}-команды. Например, команда
\cmd{ESKDtheAuthor} печатает фамилию автора, а команда
\cmd{ESKDtheNormContr} печатает фамилию нормоконтролера.

\sloppy
Немного иначе обстоят дела с датой и литерой. Год печатает команда
\cmd{ESKDtheYear}, месяц "--- \cmd{ESKDtheMonth}, а число "---
\cmd{ESKDtheDay}. Буквы литеры печатают команды \cmd{ESKDtheLetterI},
\cmd{ESKDtheLetterII}, \cmd{ESKDtheLetterIII}.

\fussy

\subsection{Титульный лист}
В классе \pkg{eskdtext} титульный лист печатает команда
\cmd{maketitle}, которую размещают в теле документа.

Согласно \gost{2.105-95} титульный лист разбит на 10 полей. По
умолчанию большинство полей уже содержат необходимые данные, заданные
командами, описанными в разделе \ref{docinfo}. Также для заполнения
титульного листа существует несколько дополнительных команд, которые
размещают в преамбуле документа.

Команда
\begin{defs}
\cmddef{ESKDtitleApprovedBy}{\{\cmdarg{должность}\}\{\cmdarg{фамилия}\}}
\end{defs}
размещает гриф утверждения в правой части поля 3.

Команда
\begin{defs}
\cmddef{ESKDtitleAgreedBy}{\{\cmdarg{должность}\}\{\cmdarg{фамилия}\}}
\end{defs}
размещает гриф согласования в левой части поля 3.  Если согласовавших
лиц больше одного, то команду повторяют несколько раз, при этом
остальные фамилии размещаются в левой части поля 8.

Список разработчиков документа задают при помощи команды
\begin{defs}
\cmddef{ESKDtitleDesignedBy}{\{\cmdarg{должность}\}\{\cmdarg{фамилия}\}}
\end{defs}
Команду повторяют для каждого разработчика. Список размещается в
правой части поля 8.

При утверждении документа листом утверждения его обозначение указывают
в левой части поля 3. Для этого используется команда
\begin{defs}
\cmddef{ESKDtitleApprovingSheet}{\{\cmdarg{обозначение}\}}
\end{defs}

Кроме описанных выше методов заполнения титульного листа, имеется
метод, позволяющий принудительного указать какие данные нужно
разместить в том или ином поле посредством переопределения
\cmd{ESKDtheTitleField}-команд. Например, для того чтобы в поле 10
разместить какой-нибудь текст (по умолчанию поле содержит год) в
преамбулу документа нужно поместить
\begin{lstlisting}
\renewcommand{\ESKDtheTitleFieldX}{какой-нибудь текст}
\end{lstlisting}

\section{Благодарности}
\sloppy
Спасибо всем участникам почтовой рассылки \mbox{CyrTeX-ru}
\mbox{[\url{https://info.vsu.ru/Lists/CyrTeX-ru/List.html}]}, которые
помогают мне решать вопросы, связанные с разработкой \pkg{eskdx}.

\fussy

Спасибо Александру Роженко за его коллекцию пакетов \pkg{ncctools},
откуда я позаимствовал некоторые принципы.

Спасибо Киевскому техникуму электронных приборов, который побудил
меня на разработку коллекции \pkg{eskdx}. Если бы не курсовые и
дипломная, я бы этого не делал.

\end{document}

m4_dnl vim:ft=tex:tw=70:sw=2:ai
